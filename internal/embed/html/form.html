{{ template "base.html" . }}
{{ define "postheader" }}
<section class="notification" id="feedback-banner" style="display: none;">
    <div style="display: flex; justify-content: space-between; align-items: center;">
        <div>
            <strong>ðŸ“Š Help us improve Officetracker!</strong><br>
            Please take a moment to fill out our <a href="https://forms.office.com/r/aqcpVBUWFH" target="_blank" style="color: #000; text-decoration: underline;">user feedback survey</a>.
        </div>
        <button id="dismiss-banner" style="background: none; border: none; font-size: 1.2em; cursor: pointer; padding: 0 0 0 10px;" aria-label="Dismiss banner">âœ•</button>
    </div>
</section>
<script>
// Check if banner was previously dismissed
if (!document.cookie.split('; ').find(row => row.startsWith('feedback-banner-dismissed='))) {
    document.getElementById('feedback-banner').style.display = 'block';
}

// Add dismiss functionality
document.getElementById('dismiss-banner').addEventListener('click', function() {
    // Set cookie to remember dismissal (expires in 1 year)
    const expires = new Date();
    expires.setFullYear(expires.getFullYear() + 1);
    document.cookie = 'feedback-banner-dismissed=true; expires=' + expires.toUTCString() + '; path=/';
    
    // Hide the banner
    document.getElementById('feedback-banner').style.display = 'none';
});
</script>
{{ end }}
{{ define "content" }}
<div id="calendar-nav">
    <button id="prev-month">Previous</button>
    <span id="month-year"></span>
    <button id="next-month">Next</button>
</div>
<div id="calendar"></div>
<div id="legend" class="legend">
    <div class="legend-item">
        <span class="legend-color present"></span> Work from Home
    </div>
    <div class="legend-item">
        <span class="legend-color not-present"></span> In office
    </div>
    <div class="legend-item">
        <span class="legend-color other"></span> Other (Untracked)
    </div>
</div>
<div>
    <h2>Notes</h2>
    <p>
        <textarea name="notes" id="notes"></textarea>
    </p>
</div>
<div class="summary-container">
    <h2>Summary</h2>
    <p id="summary-headline"></p>
    <table id="summary-table">
        <tr>
            <th>Month</th>
            <th>Present</th>
            <th>Total</th>
            <th>Percent</th>
        </tr>
    </table>
</div>
<div>
    <h2>Export</h2>
    <p>
        Export annual attendance as a PDF report or CSV
    </p>
    <p>
        <button id="export-csv">Export to CSV</button>
        <button id="export-pdf">Export to PDF</button>
    </p>
</div>
<script>{{ template "form.js" . }}</script>
{{ end }}
